The Biblioteca Database - Answers


Who checked out the book 'The Hobbit’?
SELECT title, name FROM member INNER JOIN checkout_item ON checkout_item.member_id = member.id INNER JOIN book ON book.id = checkout_item.book_id WHERE book.title = "The Hobbit" ;
The Hobbit|Anand Beck


How many people have not checked out anything?
SELECT COUNT(*) FROM member WHERE member.id NOT IN (SELECT member_id FROM checkout_item);
37


What books and movies aren't checked out?
SELECT title FROM book WHERE book.id NOT IN (SELECT distinct book_id FROM checkout_item WHERE book_id IS NOT NULL);
Fellowship of the Ring
1984
Tom Sawyer
Catcher in the Rye
To Kill a Mockingbird
Domain Driven Design


SELECT title FROM movie WHERE movie.id NOT IN (SELECT distinct movie_id FROM checkout_item WHERE movie_id IS NOT NULL);
Thin Red Line
Crouching Tiger, Hidden Dragon
Lawrence of Arabia
Office Space


Add the book 'The Pragmatic Programmer', and add yourself as a member. Check out 'The Pragmatic Programmer'. Use your query from question 1 to verify that you have checked it out. Also, provide the SQL used to update the database.
INSERT INTO book (title) VALUES ("The Pragmatic Programmer");
INSERT INTO member (name) VALUES ("Sandy Santos");
INSERT INTO checkout_item (book_id, member_id) VALUES (11, 43);
SELECT title, name FROM member INNER JOIN checkout_item ON checkout_item.member_id = member.id INNER JOIN book ON book.id = checkout_item.book_id WHERE book.title = "The Pragmatic Programmer";
The Pragmatic Programmer|Sandy Santos


Who has checked out more than 1 item? 
Tip: Research the GROUP BY syntax.
SELECT COUNT(*) AS total, name FROM member INNER JOIN checkout_item ON checkout_item.member_id = member.id GROUP BY member.name HAVING total > 1;
3|Anand Beck
3|Frank Smith